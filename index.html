<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Training Plan Viewer</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        :root {
            --primary-color: #2ecc71;
            --secondary-color: #3498db;
            --accent-color: #e74c3c;
            --text-color: #2c3e50;
            --background-color: #f8f9fa;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            padding: 20px;
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            min-height: 100vh;
            color: var(--text-color);
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            padding: 30px;
            position: relative;
            overflow: hidden;
        }

        .container::before {
            content: '';
            position: absolute;
            top: 0;
            right: 0;
            width: 200px;
            height: 200px;
            background: linear-gradient(135deg, var(--primary-color) 0%, var(--secondary-color) 100%);
            opacity: 0.1;
            border-radius: 0 0 0 100%;
            z-index: 0;
        }

        .header {
            text-align: center;
            margin-bottom: 30px;
            position: relative;
        }

        .header h1 {
            color: var(--text-color);
            font-size: 2.5em;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
        }

        .header h1 i {
            color: var(--primary-color);
            animation: bounce 2s infinite;
        }

        .quote {
            font-style: italic;
            color: #666;
            margin: 20px 0;
            padding: 15px;
            border-left: 4px solid var(--primary-color);
            background: var(--background-color);
            border-radius: 0 10px 10px 0;
        }

        .controls {
            display: flex;
            gap: 15px;
            justify-content: center;
            margin-bottom: 30px;
        }

        select, button {
            padding: 10px 20px;
            border: none;
            border-radius: 10px;
            font-size: 1em;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        select {
            background: var(--background-color);
            color: var(--text-color);
            min-width: 200px;
        }

        button {
            background: var(--primary-color);
            color: white;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        button:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(46, 204, 113, 0.3);
        }

        .week {
            background: white;
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 30px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
            position: relative;
            overflow: hidden;
        }

        .week::after {
            content: '';
            position: absolute;
            bottom: 0;
            right: 0;
            width: 100px;
            height: 100px;
            background: linear-gradient(135deg, transparent 50%, rgba(46, 204, 113, 0.1) 50%);
            border-radius: 0 0 15px 0;
        }

        .week h2 {
            color: var(--primary-color);
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .week h2 i {
            font-size: 0.8em;
        }

        .metrics {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }

        .metric-card {
            background: var(--background-color);
            padding: 15px;
            border-radius: 12px;
            text-align: center;
            transition: transform 0.3s ease;
        }

        .metric-card:hover {
            transform: translateY(-5px);
        }

        .metric-card i {
            font-size: 2em;
            color: var(--primary-color);
            margin-bottom: 10px;
        }

        .day {
            border: 1px solid #eee;
            border-radius: 12px;
            margin: 15px 0;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .day-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .day:hover {
            transform: translateX(5px);
            border-color: var(--primary-color);
        }

        .day h3 {
            padding: 15px;
            margin: 0;
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: var(--background-color);
            border-radius: 12px 12px 0 0;
        }

        .calorie-badge {
            background: var(--primary-color);
            color: white;
            padding: 5px 10px;
            border-radius: 20px;
            font-size: 0.8em;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .session {
            border: 1px solid #e0e0e0;
            border-radius: 8px;
            margin: 15px 0;
            background: #fff;
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
        }

        .session-main {
            padding: 15px;
            background: #f8f9fa;
            cursor: pointer;
            user-select: none;
        }

        .session-main:hover {
            background: #f0f0f0;
        }

        .session-content {
            display: none;
            border-top: 1px solid #e0e0e0;
        }

        .session-content.expanded {
            display: block;
        }

        .session-header {
            display: grid;
            grid-template-columns: 1fr auto;
            gap: 15px;
            align-items: center;
        }

        .session-title {
            font-size: 1.2em;
            font-weight: bold;
            color: var(--primary-color);
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .session-title .toggle-icon {
            transition: transform 0.3s ease;
        }

        .session-title .toggle-icon.expanded {
            transform: rotate(180deg);
        }

        .session-meta {
            display: flex;
            gap: 10px;
            margin-top: 10px;
        }

        .session-duration {
            background: #e3f2fd;
            padding: 5px 15px;
            border-radius: 20px;
            font-weight: bold;
            color: #1976d2;
            white-space: nowrap;
        }

        .session-location {
            background: #f5f5f5;
            padding: 5px 15px;
            border-radius: 20px;
            color: #555;
            white-space: nowrap;
        }

        .subsections {
            padding: 15px;
        }

        .subsection {
            border: 1px solid #e0e0e0;
            border-radius: 8px;
            margin-bottom: 15px;
            background: white;
        }

        .subsection-header {
            padding: 12px 15px;
            background: #f5f5f5;
            border-bottom: 1px solid #e0e0e0;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .subsection-title {
            font-weight: bold;
            color: #333;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .subsection-duration {
            font-weight: normal;
            color: #1976d2;
        }

        .subsection-content {
            padding: 15px;
        }

        .subsection-details {
            list-style-type: none;
            padding: 0;
            margin: 0;
        }

        .subsection-details li {
            padding: 5px 0;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .subsection-details li i {
            color: var(--primary-color);
        }

        .equipment-section {
            margin-top: 15px;
        }

        .equipment-header {
            background: #f5f5f5;
            padding: 10px 15px;
            border-radius: 8px 8px 0 0;
            cursor: pointer;
        }

        .equipment-content {
            display: none;
            padding: 15px;
            background: white;
            border: 1px solid #e0e0e0;
            border-top: none;
            border-radius: 0 0 8px 8px;
        }

        .equipment-content.expanded {
            display: block;
        }

        .equipment-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 10px;
        }

        .exercise-info {
            margin-top: 10px;
            padding: 10px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 8px;
            font-size: 0.9em;
        }
        
        .exercise-info p {
            margin: 5px 0;
        }
        
        .exercise-info a {
            color: #4CAF50;
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            gap: 5px;
        }
        
        .exercise-info a:hover {
            text-decoration: underline;
        }
        
        .exercise-description {
            margin: 8px 0;
            color: #e0e0e0;
        }
        
        .toggle-description {
            background: none;
            border: none;
            color: #4CAF50;
            cursor: pointer;
            padding: 5px 10px;
            font-size: 0.9em;
            display: inline-flex;
            align-items: center;
            gap: 5px;
        }
        
        .toggle-description:hover {
            color: #81C784;
        }

        .sessions {
            display: none;
        }
        
        .sessions.expanded {
            display: block;
        }
        
        .exercise-description {
            display: none;
        }
        
        .exercise-description.expanded {
            display: block;
        }

        .session-structure {
            margin-top: 15px;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 5px;
        }

        .structure-sections {
            margin-left: 10px;
        }

        .structure-section {
            margin: 15px 0;
            padding-left: 15px;
            border-left: 2px solid #e9ecef;
        }

        .section-header {
            margin-bottom: 10px;
        }

        .section-title {
            display: flex;
            align-items: center;
            gap: 8px;
            color: #34495e;
            font-weight: 500;
            font-size: 1.1em;
        }

        .section-duration {
            color: #7f8c8d;
            font-size: 0.9em;
            display: flex;
            align-items: center;
            gap: 5px;
            margin-left: 10px;
        }

        .section-content {
            padding-left: 25px;
            margin-top: 8px;
        }

        .section-item {
            margin: 6px 0;
            color: #576574;
            line-height: 1.4;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .section-item i {
            color: #95a5a6;
            font-size: 0.8em;
        }

        .session-duration {
            color: #7f8c8d;
            font-size: 0.9em;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .session-detail {
            margin: 5px 0;
            color: #2c3e50;
            line-height: 1.4;
        }

        @keyframes bounce {
            0%, 20%, 50%, 80%, 100% {
                transform: translateY(0);
            }
            40% {
                transform: translateY(-10px);
            }
            60% {
                transform: translateY(-5px);
            }
        }

        .loading {
            text-align: center;
            padding: 50px;
            font-size: 1.2em;
            color: var(--text-color);
        }

        .loading i {
            font-size: 2em;
            color: var(--primary-color);
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            100% {
                transform: rotate(360deg);
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header animate__animated animate__fadeIn">
            <h1><i class="fas fa-running"></i> Training Plan Viewer</h1>
            <div class="quote" id="quote"></div>
        </div>

        <div class="controls animate__animated animate__slideInDown">
            <select id="monthSelect">
                <option value="january">January 2025</option>
                <option value="february">February 2025</option>
                <option value="march">March 2025</option>
                <option value="april">April 2025</option>
            </select>
            <button onclick="loadTrainingData()">
                <i class="fas fa-sync-alt"></i> Load Plan
            </button>
        </div>

        <div id="trainingContent"></div>
    </div>

    <script>
        const quotes = [
            "The only bad workout is the one that didn't happen.",
            "Your body can stand almost anything. It's your mind you have to convince.",
            "The difference between try and triumph is just a little umph!",
            "Success is walking from failure to failure with no loss of enthusiasm.",
            "The hard days are the best because that's when champions are made.",
            "Don't count the days, make the days count.",
            "The only person you are destined to become is the person you decide to be.",
            "Believe you can and you're halfway there."
        ];

        // Set random quote on load
        document.getElementById('quote').innerHTML = `<i class="fas fa-quote-left"></i> ${quotes[Math.floor(Math.random() * quotes.length)]} <i class="fas fa-quote-right"></i>`;

        function formatMetric(value, type) {
            if (type === 'calories') {
                const num = parseInt(value) || 0;
                return num.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",");
            }
            if (type === 'weight') {
                const num = parseFloat(value) || 0;
                return num.toFixed(1);
            }
            return value || 0;
        }

        function getDayType(calories) {
            calories = parseInt(calories) || 0;
            if (calories <= 1900) return 'Recovery Day';
            if (calories <= 2100) return 'Medium Intensity Day';
            return 'High Intensity Day';
        }

        function getDayTypeClass(calories) {
            calories = parseInt(calories) || 0;
            if (calories <= 1900) return 'recovery';
            if (calories <= 2100) return 'medium-intensity';
            return 'high-intensity';
        }

        function parseMarkdown(markdown) {
            const lines = markdown.split('\n');
            const weeks = [];
            let currentWeek = null;
            let currentDay = null;
            let currentSession = null;
            let parsingStructure = false;
            let currentStructureItem = null;

            for (let line of lines) {
                // Week start
                if (line.startsWith('## Week')) {
                    currentWeek = {
                        title: line.substring(3).trim(),
                        metrics: {},
                        days: []
                    };
                    weeks.push(currentWeek);
                }
                // Week metrics
                else if (line.startsWith('Target weight')) {
                    const match = line.match(/Target weight.*: ([\d.]+) kg/);
                    if (match) {
                        currentWeek.metrics.targetWeight = parseFloat(match[1]);
                    }
                }
                // Day start
                else if (line.startsWith('**') && line.includes('day')) {
                    currentDay = {
                        day: line.replace(/\*\*/g, '').split(',')[0].trim(),
                        date: line.replace(/\*\*/g, '').split(',')[1].trim(),
                        sessions: [],
                        calories: 0,
                        weight: 0
                    };
                    currentWeek.days.push(currentDay);
                    parsingStructure = false;
                }
                // Day caloric target
                else if (line.includes('CALORIC TARGET:')) {
                    const match = line.match(/CALORIC TARGET: ([\d,]+)/);
                    if (match) {
                        currentDay.calories = parseInt(match[1].replace(',', ''));
                    }
                }
                // Day weight
                else if (line.includes('Current weight:')) {
                    const match = line.match(/Current weight: ([\d.]+)/);
                    if (match) {
                        currentDay.weight = parseFloat(match[1]);
                    }
                }
                // Session start
                else if (line.startsWith('- ')) {
                    currentSession = {
                        name: line.substring(2).trim(),
                        duration: '',
                        location: '',
                        equipment: '',
                        structure: []
                    };
                    currentDay.sessions.push(currentSession);
                    parsingStructure = false;
                }
                // Session structure header
                else if (line.includes('Session structure:')) {
                    parsingStructure = true;
                    currentSession.structure = [];
                }
                // Structure item
                else if (parsingStructure && line.match(/^\s+\d+\./)) {
                    const match = line.match(/^\s+(\d+)\.\s+(.*?)\s*\((\d+)\s*min\):/);
                    if (match) {
                        currentStructureItem = {
                            name: match[2].trim(),
                            duration: match[3],
                            details: []
                        };
                        currentSession.structure.push(currentStructureItem);
                    }
                }
                // Structure item details
                else if (parsingStructure && line.match(/^\s+-/)) {
                    if (currentStructureItem) {
                        currentStructureItem.details.push(line.replace(/^\s+-\s*/, '').trim());
                    }
                }
                // Session details
                else if (line.startsWith('  * ')) {
                    const detail = line.substring(4).trim();
                    if (detail.startsWith('Duration:')) {
                        currentSession.duration = detail.replace('Duration:', '').trim().replace('~', '');
                    }
                    else if (detail.startsWith('Location:')) {
                        currentSession.location = detail.replace('Location:', '').trim();
                    }
                    else if (detail.startsWith('Equipment:')) {
                        currentSession.equipment = detail.replace('Equipment:', '').trim()
                            .replace('[', '').replace(']', '');
                    }
                }
            }
            
            return weeks;
        }

        function parseSessionStructure(session) {
            if (!session.structure) return '';
            
            return `
                <div class="subsections">
                    ${session.structure.map((subsection, index) => `
                        <div class="subsection">
                            <div class="subsection-header">
                                <div class="subsection-title">
                                    <i class="fas fa-tasks"></i>
                                    ${index + 1}. ${subsection.name}
                                    <span class="subsection-duration">
                                        <i class="far fa-clock"></i> ${subsection.duration} min
                                    </span>
                                </div>
                            </div>
                            <div class="subsection-content">
                                <ul class="subsection-details">
                                    ${subsection.details.map(detail => `
                                        <li><i class="fas fa-chevron-right"></i>${detail}</li>
                                    `).join('')}
                                </ul>
                            </div>
                        </div>
                    `).join('')}
                </div>
            `;
        }

        function createExerciseInfoHTML(session) {
            const info = getExerciseInfo(session.name);
            if (!info) return '';
            
            return `
                <div class="exercise-info">
                    <p>${info.description}</p>
                    <p><strong>Tips:</strong> ${info.tips}</p>
                    <a href="${info.link}" target="_blank">
                        <i class="fas fa-external-link-alt"></i> Learn more
                    </a>
                </div>
            `;
        }

        function getExerciseInfo(exerciseName) {
            // Try to find an exact match first
            let info = exerciseInfo[exerciseName];
            
            // If no exact match, try to find a partial match
            if (!info) {
                const key = Object.keys(exerciseInfo).find(k => 
                    exerciseName.toLowerCase().includes(k.toLowerCase()));
                info = exerciseInfo[key];
            }
            
            return info;
        }

        const exerciseInfo = {
            'Run streak minimum': {
                description: 'A short, easy run to maintain running consistency. Focus on proper form and keeping the intensity very low.',
                link: 'https://www.runnersworld.com/training/a20803505/streak-running-basics/',
                tips: 'Keep it slow and easy, focus on form over speed.'
            },
            'Active recovery': {
                description: 'Light activities to promote recovery while maintaining movement. Can include walking, stretching, and light mobility work.',
                link: 'https://www.trainingpeaks.com/blog/the-importance-of-active-recovery/',
                tips: 'Listen to your body, stay at a very low intensity.'
            },
            'Technical training': {
                description: 'Focused practice on orienteering techniques, including map reading, compass work, and route choice exercises.',
                link: 'https://www.britishorienteering.org.uk/training_tips',
                tips: 'Focus on accuracy over speed, practice various techniques.'
            },
            'Long technical training': {
                description: 'Extended orienteering session combining endurance with technical skills. Emphasis on maintaining technique while managing fatigue.',
                link: 'https://www.britishorienteering.org.uk/training_tips',
                tips: 'Maintain form even when tired, practice navigation under fatigue.'
            },
            'Strength training': {
                description: 'Full-body workout focusing on key muscle groups for running and orienteering. Includes both upper and lower body exercises.',
                link: 'https://www.runnersworld.com/training/g20862002/basic-strength-training/',
                tips: 'Focus on proper form, gradually increase weights.'
            },
            'Intervals': {
                description: 'High-intensity running segments alternated with recovery periods. Improves speed, endurance, and running economy.',
                link: 'https://www.runnersworld.com/training/a20801301/interval-training-workouts/',
                tips: 'Maintain good form during high-intensity portions, full recovery between sets.'
            },
            'Core workout': {
                description: 'Focused exercises to strengthen the core muscles, essential for stability and power transfer while running.',
                link: 'https://www.runnersworld.com/training/g20862001/core-exercises-for-runners/',
                tips: 'Quality over quantity, focus on engaging the core throughout.'
            }
        };

        function createStructureSectionHTML(section) {
            return `
                <div class="structure-section">
                    <div class="section-header">
                        <span class="section-title">${section.name}</span>
                        ${section.duration ? `<span class="section-duration">(${section.duration} min)</span>` : ''}
                    </div>
                    <div class="section-items">
                        ${section.items.map(item => `<div class="section-item">- ${item}</div>`).join('')}
                    </div>
                </div>
            `;
        }

        function createSessionHTML(session) {
            const details = session.details.map(detail => `
                <div class="session-detail">${detail}</div>
            `).join('');

            const structure = session.structure && session.structure.length > 0 ? `
                <div class="session-structure">
                    ${session.structure.map(section => `
                        <div class="structure-section">
                            <div class="section-header">
                                <div class="section-title">
                                    <i class="fas fa-tasks"></i>
                                    ${section.name}
                                    ${section.duration ? `
                                        <span class="section-duration">
                                            <i class="far fa-clock"></i> ${section.duration} min
                                        </span>
                                    ` : ''}
                                </div>
                            </div>
                            <div class="section-content">
                                ${section.items.map(item => `
                                    <div class="section-item">
                                        <i class="fas fa-chevron-right"></i> ${item}
                                    </div>
                                `).join('')}
                            </div>
                        </div>
                    `).join('')}
                </div>
            ` : '';

            return `
                <div class="session">
                    <div class="session-main" onclick="toggleSession(this, event)">
                        <div class="session-header">
                            <div class="session-title">
                                <i class="fas fa-chevron-down toggle-icon"></i>
                                <i class="fas fa-flag"></i> ${session.name}
                            </div>
                            ${session.duration ? `
                                <div class="session-duration">
                                    <i class="far fa-clock"></i> ${session.duration} min
                                </div>
                            ` : ''}
                        </div>
                    </div>
                    <div class="session-content">
                        ${details}
                        ${structure}
                    </div>
                </div>
            `;
        }

        function createWeekHTML(weekData, index) {
            const metrics = weekData.metrics;
            const animationDelay = index * 0.2;
            
            return `
                <div class="week animate__animated animate__fadeInUp" style="animation-delay: ${animationDelay}s">
                    <h2><i class="fas fa-calendar-week"></i> Week ${weekData.title}</h2>
                    <div class="metrics">
                        <div class="metric-card">
                            <i class="fas fa-fire"></i>
                            <h3>Daily Caloric Target</h3>
                            <h2>${formatMetric(metrics.daily_calories, 'calories')} kcal</h2>
                        </div>
                        <div class="metric-card">
                            <i class="fas fa-weight"></i>
                            <h3>Average Weight</h3>
                            <h2>${formatMetric(metrics.avg_weight, 'weight')} kg</h2>
                        </div>
                        <div class="metric-card">
                            <i class="fas fa-dumbbell"></i>
                            <h3>Total Sessions</h3>
                            <h2>${metrics.total_sessions}</h2>
                        </div>
                    </div>
                    ${weekData.days.map(day => `
                        <div class="day" onclick="toggleDay(this, event)">
                            <div class="day-header">
                                <span><i class="far fa-calendar-alt"></i> ${day.day} - ${day.date}</span>
                                <span class="calorie-badge"><i class="fas fa-fire-alt"></i> ${formatMetric(day.calories, 'calories')} kcal</span>
                            </div>
                            <div class="weight"><i class="fas fa-weight"></i> Weight: ${formatMetric(day.weight, 'weight')} kg</div>
                            <div class="day-type ${getDayTypeClass(day.calories)}">
                                <i class="fas fa-chart-line"></i> ${getDayType(day.calories)}
                            </div>
                            <div class="sessions">
                                ${day.sessions.map(session => createSessionHTML(session)).join('')}
                            </div>
                        </div>
                    `).join('')}
                </div>
            `;
        }

        function toggleDay(element, event) {
            // Prevent clicks within the sessions area from triggering day toggle
            if (event.target.closest('.sessions')) {
                return;
            }
            
            const sessions = element.querySelector('.sessions');
            if (sessions) {
                sessions.classList.toggle('expanded');
            }
        }
        
        function toggleExerciseDetails(button, event) {
            event.stopPropagation(); // Prevent day toggle
            const description = button.nextElementSibling;
            description.classList.toggle('expanded');
            
            // Update button text
            const isExpanded = description.classList.contains('expanded');
            button.innerHTML = `<i class="fas fa-info-circle"></i> ${isExpanded ? 'Hide' : 'Show'} Exercise Details`;
        }

        function toggleSession(element, event) {
            event.stopPropagation();
            const content = element.nextElementSibling;
            const icon = element.querySelector('.toggle-icon');
            content.classList.toggle('expanded');
            icon.classList.toggle('expanded');
        }

        function toggleSection(element) {
            const content = element.nextElementSibling;
            const icon = element.querySelector('.toggle-icon');
            content.classList.toggle('expanded');
            icon.classList.toggle('expanded');
        }

        function loadTrainingData() {
            const month = document.getElementById('monthSelect').value;
            const contentDiv = document.getElementById('trainingContent');
            
            contentDiv.innerHTML = '<div class="loading"><i class="fas fa-spinner"></i><br>Loading training plan...</div>';
            
            // Use the API endpoint
            fetch(`/api/training/${month}`)
                .then(response => {
                    if (!response.ok) {
                        throw new Error(`HTTP error! status: ${response.status}`);
                    }
                    return response.json();
                })
                .then(weeks => {
                    console.log('Parsed weeks:', weeks); // Debug log
                    if (weeks.length === 0) {
                        throw new Error('No weeks found in the training data');
                    }
                    contentDiv.innerHTML = weeks.map((week, index) => createWeekHTML(week, index)).join('');
                })
                .catch(error => {
                    console.error('Error loading training plan:', error);
                    contentDiv.innerHTML = `
                        <div class="error" style="padding: 20px; background-color: #fee; border-radius: 10px; color: #c33;">
                            <h3><i class="fas fa-exclamation-triangle"></i> Error loading training plan</h3>
                            <p>${error.message}</p>
                            <p>Please check the browser console for more details.</p>
                        </div>`;
                });
        }

        // Load initial data
        loadTrainingData();
    </script>
</body>
</html>
